<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1051px" height="474px" viewBox="-0.5 -0.5 1051 474" content="&lt;mxfile host=&quot;www.draw.io&quot; modified=&quot;2019-10-29T02:16:34.809Z&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.120 Safari/537.36&quot; etag=&quot;FAwqtusshWUNjksJTCfD&quot; version=&quot;12.1.8&quot; type=&quot;google&quot; pages=&quot;1&quot;&gt;&lt;diagram id=&quot;I69ntuwKaV6X0LKoSFC2&quot; name=&quot;Page-1&quot;&gt;7Vtbc5s4FP41TNuHZLja8OhLujs77jTb7E7bRxlkW1sZeUF24v76lYSEQcIxcSDOdtKhLTpIAp3znatky5usH37LwGb1iSQQW66dPFje1HJdx7dD9h+n7AvK0JeEZYYS2elAuEM/oSTakrpFCcxrHSkhmKJNnRiTNIUxrdFAlpH7ercFwfW3bsASGoS7GGCT+hUldFVQQ3d4oP8O0XKl3uwMouLJHMQ/lhnZpvJ9KUlh8WQN1DRyjfkKJOS+QvJuLG+SEUKLu/XDBGLOVsWxYtzHI0/LT85gStsM+PaZzr58XcS3cPf9y2fwbzj8w7uSC9wBvJWs+DuHmRSw+Gq6V0zK79EaA7Y+b7wgKb2TTxzWBhgtU3Yfs2+BGSPsYEYR4+9IPqBkw6jxCuFkBvZky784p4x5qjVekQz9ZNMCLOdkjzMqoeIOaj3u+EhGthk1gznrc6vY4GikT+Ch1nEGcioJMcEYbHI0L5exBtkSpWNCKVnLTpI/bDnw4SjjnVKcTEMgWUOa7VkXOWAgASB1w7Nl+/6ANEf1WVVQpmhAgntZznyQMruRgn6C0END6FfWxLVG7H3s8hOUbwCNVzC/2YkljgotA3sDEowpVIgqIz/ghGDCZD8VOsAwgjDWSAomGC7oUZCwl8coXc5En6l/oHyRrOEkwsYusFCnFUoSmHIBEwooKKTJRbchKKWCd8GYXWxpE/s6sAL24RPWdg5tdvHuGZ2QlK0FICFYyKByDzlc2qHguIKZ0JBYYLhuBQXVr3MoRAYUDBljJGRXyFhZR+csAa+ZqDA8SPQvLvDplWNI3TOl7jVIGIM5xLckRxQRPn9W9NUkfynhBm474YY9ydYZNBr3KcSQwqTQbV3YK7pW9rcDy+f5ddPnBg2mz2lgSdCX6XOaHZ7gCQPbJZjiDS7OFNMhKB/wGC907Z5Lv1l47hEPyxiV7LhHL2gfEVaDYZqoHnNMuDevOfxQdGGL+yZVXTS+8wYz2bI5fag+nO5V6wFRPsy5tu2BbBcjbS+U7cNQ3qiOvIUZYmzlUUwlAICJEUBq8mZcItsshqf9LlvmEj5mVgrFNQFUAYjCTAYxoGhX/7YmgMjZbrllPGDRiE08DWPFmuSoanCpTeRoE/n6RMWijYkEXsslPgPCpiN7FRBWUKzB0HGCJ8PwXGW4BHyPuMUe4BtoqIvOhK/nnJioZ/iqHLEC32ZXJAPuCoRFWnM06uWxD9hSkheYrOZqbYJwGaD5HXm+YZ3LTmR6vqAp+u3L8aklaNGAYP3ddp7HGZozDew3HghCPT8MzHjAfcl4wHMNthg8qBg/GfsnIF/BRPKlwqLScjlPs1zKdto12/m45ezQ2pV1qA68dROog25MYGmplOVyzjSBwbGw9IVMoOe9BtC1B1AXbrBHXBhW5dzITp/I918YF76BixnKKUwbDLPpHTuwzwMtNmhKYpvSep3h3ZnnwODIJiMUxiyrt0QFL5e+K+NN3sHmwYA7wJw7nDpYFoWPAVhzb5/O841o2w2kJo/ojdgVY5DnDbOKoMOQTb4CGygUl3LFvV8hCu9YlMFp9xnY1OWm4hX/aISihTH1gGXQjej1+DJo8MzRi3pms3xRiAZmO8S0OSM7lDQoxlvpvpvYrKl+9aKle88s1Viux4UtlfOtXP+siq73yuv13lvBvkfxXrpi7z8tBlZVp1oQzJ7LGlUR3arddsfVImSVXhlVUidyzy9PafG2XxZyj2V5vNVjzdVrW7UqoqpHw3Wno7KVr3sVPaRuG5sP/BMT9Ryb+2ZsbuC1TbW1AdMHeAZBDZ3e8DnF0+thUAPoy1VPleU+CcRjIUkFiGFHOHRPpHatc0T7sjli4Biw4zJTYS5zJSuyJCnANwfqWJzaEWaTS/rQZ0aEk+OA/QdSupf2k1dRj1nQKkKd56CzBk7nwqbTD1oi1j9iOp8Jz0jPvlz/OmiFq1ER/ZbdZHjRhwU0c3H+Dn7Z1k1gRY41noob2wrZzdAaRdZ4ZN1EVjS0xj6nRBMrdMRNYI0CM6GWeXZDIt6QfA/PzvM32zlGMbtZbNNYxGeuTdLq7vh7y/Uh/4AP577jGZ/XliSZnxBhD1bs3zlckAxymjj5cP63T3tiLUw64qzdK3NNzoIFNzyXY6zRPnPxpcL61jgU6hlaoxtr5Ao9Da0w4BTmdfnNwBp71ijkSh0OrHAiNHfMNb1Q89FE3ES8T4d4UQk+LLGSv2Y1lJ94VT4U78Cicvu+75e3LWsqw1arZ05ey9c9VnS1r9nfd5avWeh37dSmx+V96FB33wAq3cOvgU+Y/FrwPNu1DadGuvJ/3B0ZalvPjl/G55Vc1Ws6ulCeBOm+hGYeeu29hFY/3XWiPHHuocaek73W29rHkr0e6mRBZF9HgxrGOCVyovKPVmdvW7DwtdQyjF5bXmlu9E0IgwDBuPcDSWFQV+uGU1ovez7ZNze9Pu3v/pwdtaLxHqM0EbuZJyzpvCgCzeYlofxB1+ctLXZSuuJrybTyjGyTvWzcb+iNsy22kyrWUjh3lpg0H7XRylf2KYt2KJ85Xs2ChmeUeDs0hW0LtQUsL3XARztwHeoYaX1yW0Nl+MIntxU7LgzBCgAfr+B2CDRl5E8i7aInyV4/0Fjz8DPaovvhZ8rezX8=&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs><clipPath id="mx-clip-4-281-152-26-0"><rect x="4" y="281" width="152" height="26"/></clipPath><clipPath id="mx-clip-524-31-152-26-0"><rect x="524" y="31" width="152" height="26"/></clipPath></defs><g><path d="M 0 276 L 0 250 L 160 250 L 160 276" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 0 276 L 0 310 L 160 310 L 160 276" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 0 276 L 160 276" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="79.5" y="268.5">UserModel</text></g><g fill="#000000" font-family="Helvetica" clip-path="url(#mx-clip-4-281-152-26-0)" font-size="12px"><text x="5.5" y="293.5">-  $dispatchesEvent: array</text></g><path d="M 0 306 L 160 306" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="280" y="200" width="110" height="50" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(286.5,218.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="97" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">UserDeletedEvent</div></div></foreignObject><text x="49" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">UserDeletedEvent</text></switch></g><rect x="280" y="310" width="110" height="50" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(284.5,328.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="100" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">UserDeletingEvent</div></div></foreignObject><text x="50" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">UserDeletingEvent</text></switch></g><path d="M 164.63 275.39 L 272.56 228.25" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><ellipse cx="160.96" cy="276.99" rx="4" ry="4" fill="#000000" stroke="#000000" pointer-events="none"/><path d="M 278.98 225.45 L 273.96 231.46 L 271.16 225.04 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(197.5,235.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="45" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">dispatch</div></div></foreignObject><text x="23" y="12" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">dispatch</text></switch></g><path d="M 163.62 280.68 L 272.64 331.57" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><ellipse cx="160" cy="278.99" rx="4" ry="4" fill="#000000" stroke="#000000" pointer-events="none"/><path d="M 278.99 334.53 L 271.16 334.74 L 274.12 328.39 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(196.5,291.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="45" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">dispatch</div></div></foreignObject><text x="23" y="12" fill="#000000" text-anchor="middle" font-size="11px" font-family="Helvetica">dispatch</text></switch></g><g transform="translate(311.5,142.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="31" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Event</div></div></foreignObject><text x="16" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Event</text></switch></g><rect x="520" y="255" width="120" height="50" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(523.5,273.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="113" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">UserEventSubscriber</div></div></foreignObject><text x="57" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">UserEventSubscriber</text></switch></g><path d="M 520 280 L 390 225" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 520 280 L 390 335" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g transform="translate(551.5,206.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="43" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Listener</div></div></foreignObject><text x="22" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Listener</text></switch></g><path d="M 190 5 L 366 5 L 380 19 L 380 55 L 190 55 L 190 5 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 366 5 L 366 19 L 380 19" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(192.5,6.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="161" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 162px; white-space: nowrap; overflow-wrap: normal; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">protected $subscribr = [<br />    UserEventSubscriber::class<br />];</div></div></foreignObject><text x="81" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 520 26 L 520 0 L 680 0 L 680 26" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 520 26 L 520 60 L 680 60 L 680 26" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 520 26 L 680 26" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="599.5" y="18.5">EventServiceProvider</text></g><g fill="#000000" font-family="Helvetica" clip-path="url(#mx-clip-524-31-152-26-0)" font-size="12px"><text x="525.5" y="43.5"># subscribt: array</text></g><path d="M 520 56 L 680 56" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 520.96 30.99 L 394.12 29.2" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 381.12 29.02 L 394.21 22.7 L 394.02 35.7 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 608 55 L 609.92 246.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 609.99 253.88 L 606.42 246.92 L 613.42 246.85 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 890 465 L 890 465" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 890 465 L 890 465 L 890 465 L 890 465 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 730 94.5 L 1036 94.5 L 1050 108.5 L 1050 464.5 L 730 464.5 L 730 94.5 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1036 94.5 L 1036 108.5 L 1050 108.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(732.5,96.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="307" height="362" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 308px; white-space: nowrap; overflow-wrap: normal; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">// 命名空间省略<br />class UserEventSubscribe<br />{<br />    public function onUserDeleting($event)<br />    {<br />        // do sth before delete<br />    }<br />    public function onUserDeleted($event)<br />    { <br />       // do sth after delete<br />    }<br />    <br />    // 为订阅者注册监听器<br />    public function subscribe($events)<br />    {<br />        $events-&gt;listen(<br />            UserDeleting::class,<br />            UserEventSubscriber::class . '@onUserDeleting'   <br />        );    <br /><br />        $events-&gt;listen(<br />            UserDeleted::class,<br />            UserEventSubscriber::class . '@onUserDeleted'   <br />        );    <br />    }<br />}</div></div></foreignObject><text x="154" y="187" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 640 280 L 715.88 279.58" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 728.88 279.51 L 715.92 286.08 L 715.85 273.08 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="25" y="140" width="110" height="50" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(53.5,158.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="52" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Controller</div></div></foreignObject><text x="26" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Controller</text></switch></g><path d="M 50 400.5 C 50 379.17 110 379.17 110 400.5 L 110 448.5 C 110 469.83 50 469.83 50 448.5 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 50 400.5 C 50 416.5 110 416.5 110 400.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(59.5,429.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="40" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 42px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">MySQL</div></div></foreignObject><text x="20" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">MySQL</text></switch></g><path d="M 82.08 309 L 80.18 378.13" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 80.03 383.38 L 76.72 376.29 L 80.18 378.13 L 83.72 376.48 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 80 190 L 80 243.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 80 248.88 L 76.5 241.88 L 80 243.63 L 83.5 241.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/></g></svg>